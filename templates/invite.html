{% extends "base.html" %}

{% block title %}Zusagen – {{ event.title }}{% endblock %}

{% block content %}
  <section class="panel" style="max-width: 680px; margin: 0 auto 2rem;">
    <div class="invite-hero">
      <div class="tag">{{ event.starts_at.strftime('%d.%m.%Y um %H:%M Uhr') }}</div>
      <h1 class="movie-title" style="font-size: 2rem; margin-top: 0.8rem;">{{ event.title }}</h1>
      <p style="color: var(--text-secondary); margin-top: 0.3rem;">{{ event.location }}</p>
    </div>
    {% if event.poster_url %}
      <img class="invite-poster" src="{{ event.poster_url }}" alt="Poster">
    {% endif %}
    {% if event.synopsis %}
      <p style="color: var(--text-secondary); margin-bottom: 1rem;">{{ event.synopsis }}</p>
    {% endif %}
    <div class="invite-stats">
      <span>Zusagen <strong>{{ confirmed_count }}</strong> / {{ event.capacity }}</span>
      <span>Frei <strong>{{ seats_remaining }}</strong></span>
      <span>Warteliste <strong>{{ event.waitlisted_invites()|length }}</strong></span>
    </div>
  </section>

  <section class="panel" style="max-width: 680px; margin: 0 auto;">
    <h2 style="margin-bottom: 1.2rem;">Deine Antwort</h2>
    <form method="post">
      <div class="form-group">
        <label for="name">Dein Name</label>
        <input id="name" name="name" value="{{ invite.name or '' }}" placeholder="Wie soll ich dich eintragen?" required>
      </div>
      <div class="form-group">
        <label>Teilnahme</label>
        <div class="rsvp-options">
          <label class="rsvp-option">
            <input type="radio" name="status" value="yes" {% if invite.status == 'yes' %}checked{% endif %}> Ich bin dabei
          </label>
          <label class="rsvp-option">
            <input type="radio" name="status" value="waitlist" {% if invite.status == 'waitlist' %}checked{% endif %}> Setz mich auf die Warteliste
          </label>
          <label class="rsvp-option">
            <input type="radio" name="status" value="no" {% if invite.status == 'no' %}checked{% endif %}> Ich schaffe es leider nicht
          </label>
        </div>
      </div>
      <button class="btn" type="submit">Antwort speichern</button>
    </form>
    <p style="margin-top: 1.2rem; font-size: 0.82rem; color: var(--text-muted);">
      Einladung an {{ invite.email }} – bitte diesen Link nicht weitergeben.
    </p>
  </section>
{% endblock %}
